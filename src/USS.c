/*************************************************************************************************************************************************
**                                                                                                                                              **
** Copyright (C) SAIC Technologies (2020)                                                                                                       **
**                                                                                                                                              **
** All rights reserved.                                                                                                                         **
**                                                                                                                                              **
** This document contains proprietary information belonging to SAIC                                                                             **
** Technologies. Passing on and copying of this document, and communication                                                                     **
** of its contents is not permitted without prior written authorization.                                                                        **
**                                                                                                                                              **
**************************************************************************************************************************************************
**                                                                                                                                              **
**  $FILENAME   : USS.c $                                                                                                                       **
**                                                                                                                                              **
**  $CC VERSION : \main\94 $                                                                                                                    **
**                                                                                                                                              **
**  $DATE       : 2020-08-xx $                                                                                                                  **
**                                                                                                                                              **
**  AUTHOR      : SAIC - US Group -Engineering                                                                                                  **
**                                                                                                                                              **
**  VENDOR      : SAIC Technologies                                                                                                             **
**                                                                                                                                              **
**  DESCRIPTION : This file contains                                                                                                            **
**                - USS main function                          ..                                                                               **
**                                                                                                                                              **
**  MAY BE CHANGED BY USER [yes/no]: Yes                                                                                                        **
**                                                                                                                                              **
*************************************************************************************************************************************************/
/*************************************************************************************************************************************************
**                                                     Includes
*************************************************************************************************************************************************/
#include "USS.h"
#include "USSSubFunction.h"
//#include "ObjInfoCalculation.h"
#include "SlotProcess.h"
#include "APACommonFunctions.h"
#include "APACalibration.h"
#include <stdio.h>
#include "USD.h"
//#include "APAFLGlobalSignal.h"

/*************************************************************************************************************************************************
**                                                     Imported Compiler Switch Check                                                           **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Private Macro Definitions                                                                **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Private Type Definitions                                                                 **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Private  Constant Definitions                                                            **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Private  Variable Definitions                                                            **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Global Constant Definitions                                                              **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Global Variable Definitions                                                              **
*************************************************************************************************************************************************/
#define ALG_START_SEC_VAR_32BIT
#include "IS31_UserMemMap.h"

USS_Out_ST gUSS_stOut;
APACarParameterInfoType USSPar;

#define ALG_STOP_SEC_VAR_32BIT
#include "IS31_UserMemMap.h"
/*************************************************************************************************************************************************
**                                                     Private Function Declarations                                                            **
*************************************************************************************************************************************************/
/**/

/*************************************************************************************************************************************************
**                                                     Global Function Definitions                                                              **
*************************************************************************************************************************************************/
#define ALG_START_SEC_CODE
#include "IS31_UserMemMap.h"

/*************************************************************************************************************************************************
** Syntax :  void USS(void)                                                                                                                     **
**                                                                                                                                              **
** Service ID:   : NA                                                                                                                           **
**                                                                                                                                              **
** Sync/Async:   : Synchronous                                                                                                                  **
**                                                                                                                                              **
** Reentrancy:   : Non Reentrant                                                                                                                **
**                                                                                                                                              **
** Parameters (in): none                                                                                                                        **
**                                                                                                                                              **
** Parameters (out): none                                                                                                                       **
**                                                                                                                                              **
** Return value: none                                                                                                                           **
**                                                                                                                                              **
** Description : ..                                                                                                                             **
*************************************************************************************************************************************************/
void USS()
{
    // printf("gUSD_stOut.gUSD_stSideObject.gUSD_SideUpdFlag0000: %x\n", gUSD_stOut.gUSD_stSideObject.gUSD_SideUpdFlag);


#if 1
    USS_ModeCheck();
    USS_DataHandle();
	// OIC(u8OIC_DataHandleSW);
    APASlotProcSlotMeasuringTask();
#if Debug_SW_PrivateCANForIntegration
    SendCanInfoOutForIntegration();
#endif
#if Debug_SW_PrivateCANForUSS
    SendCanInfoOutForUss();
#endif
#if 0//Debug_SW_InforCANOutput        
    SendRealTimeDROut();
    SendUSSOutput(u8SideSensorUpdateBackupFlag);
#if Debug_SW_ExeTimeTest
    SendTimeOut();
#endif

#endif

#endif

}

#define ALG_STOP_SEC_CODE
#include "IS31_UserMemMap.h"
